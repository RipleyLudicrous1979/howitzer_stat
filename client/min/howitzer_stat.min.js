(function(){function e(e,n,r,i){var s;var o=t(n);if(XMLHttpRequest){s=new XMLHttpRequest;if("withCredentials"in s){s.open(e,o,true);s.onerror=i;s.onreadystatechange=function(){if(s.readyState===4){if(s.status>=200&&s.status<400){r(s.responseText)}else{i(new Error("Response returned with non-OK status"))}}};s.send(n)}}else if(XDomainRequest){s=new XDomainRequest;s.open(e,o);s.onerror=i;s.onload=function(){r(s.responseText)};s.send(n)}else{i(new Error("CORS not supported"))}}var t=function(e){if(e.pageName){url=window.howitzer_stat_url+"/pages/"+e.pageName}else{url=window.howitzer_stat_url+"/page_classes";if(e.url&&e.title){url+="?url="+e.url+"&title="+e.title}}return url};var n=function(t){var n=document.createElement("div");n.setAttribute("class","hs-number");n.innerHTML=t||"Not Found";var r=document.createElement("li");if(t==null){r.setAttribute("class","hs-button")}else{r.setAttribute("class","hs-button-active");r.setAttribute("style","display: block;");r.setAttribute("data-page-name",t);r.addEventListener("click",function(){if(u()){f();x()}else{i("Loading");var t=this.getAttribute("data-page-name");o(t);var n={pageName:t};e("GET",n,M,A)}})}r.appendChild(n);a().appendChild(r)};var r=function(){a().innerHTML=""};var i=function(e){a().innerHTML='<li class="hs-button"><div class="hs-number">'+e+"...</div></li>"};var s=function(e){var t=e==null?"Error":e;a().innerHTML='<li class="hs-button"><div class="hs-number error">'+t+"</div></li>"};var o=function(e){a().setAttribute("data-active-page",e)};var u=function(){return!!a().getAttribute("data-active-page")};var a=function(){return document.getElementById("hs_tooltip")};var f=function(){a().setAttribute("style","display: none")};var l=function(){a().setAttribute("style","display: block")};var c=function(){return document.getElementById("hs_popup")};var h=function(){return document.getElementById("cucumberStat")};var p=function(){return document.getElementById("hs_popup__close")};var d=function(){return document.getElementById("hs_collapse_all")};var v=function(){return document.getElementById("hs_expand_all")};var m=function(){return document.getElementsByClassName("collapsible")};var g=function(){return document.getElementsByClassName("feature-container")};var y=function(){return document.getElementsByClassName("scenario")};var b=function(){return document.getElementsByClassName("web_url")};var w=function(e){return document.getElementById("fd_"+e)};var E=function(e){return document.getElementById("sce_items_"+e)};var S=function(){c().setAttribute("style","display: none;")};var x=function(){c().setAttribute("style","display: block;")};var T=function(e){if(e){if(e.getAttribute("style").lastIndexOf("none")==-1){e.setAttribute("style","display: none;")}else{e.setAttribute("style","")}}};var N=function(e){T(E(e))};var C=function(e){T(w(e))};var k=function(){_.each(m(),function(e){e.setAttribute("style","display: none;")})};var L=function(){_.each(m(),function(e){e.setAttribute("style","")})};var A=function(e){console.log(e);s(null)};var O=function(e){r();var t=JSON.parse(e).page;if(t.length==0){n(null)}_.each(t,function(e){n(e)})};var M=function(e){var t=a().getAttribute("data-active-page");f();r();n(t);var i=JSON.parse(e);if(i.features==""){c().innerHTML="There is no tests that include this page."}else{c().innerHTML=_.template(h().innerHTML,i)}p().addEventListener("click",function(){S();l()});d().addEventListener("click",function(e){k();e.preventDefault()});v().addEventListener("click",function(e){L();e.preventDefault()});_.each(g(),function(e){var t=e.id.replace("feature_container_","");e.addEventListener("click",function(e){e.preventDefault();C(t)})});_.each(b(),function(e){e.addEventListener("click",function(e){e.stopPropagation()})});_.each(y(),function(e){var t=e.id.replace("sce_","");e.addEventListener("click",function(e){e.preventDefault();N(t)})});k();x()};window.onload=function(){var t='<ol id="hs_tooltip"></ol>'+"\n"+'<div id="hs_popup" style="display: none;">';document.getElementById("hs_wrapper").innerHTML=t;i("Page identification");var n={url:document.URL||window.location.href,title:document.title};e("GET",n,O,A)}})()